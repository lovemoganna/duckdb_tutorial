@import "tailwindcss";

/* ========================================
   全局字体设置
   ======================================== */
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ========================================
   代码字体
   ======================================== */
code, pre, .font-mono {
  font-family: 'SF Mono', 'Fira Code', 'JetBrains Mono', Consolas, Monaco, 'Courier New', monospace;
}

/* ========================================
   自定义滚动条
   ======================================== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #94a3b8 0%, #64748b 100%);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #64748b 0%, #475569 100%);
}

.dark ::-webkit-scrollbar-track {
  background: #1e293b;
}

.dark ::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #475569 0%, #334155 100%);
}

/* ========================================
   暗色模式 InfoBox 优化
   ======================================== */
.dark .infobox-info {
  @apply bg-blue-950/60 border-blue-500/50;
}

.dark .infobox-info p,
.dark .infobox-info li,
.dark .infobox-info span,
.dark .infobox-info h4 {
  color: #bfdbfe !important;
}

.dark .infobox-tip {
  @apply bg-emerald-950/60 border-emerald-500/50;
}

.dark .infobox-tip p,
.dark .infobox-tip li,
.dark .infobox-tip span,
.dark .infobox-tip h4 {
  color: #a7f3d0 !important;
}

.dark .infobox-warning {
  @apply bg-amber-950/60 border-amber-500/50;
}

.dark .infobox-warning p,
.dark .infobox-warning li,
.dark .infobox-warning span,
.dark .infobox-warning h4 {
  color: #fde68a !important;
}

.dark .infobox-experiment {
  @apply bg-purple-950/60 border-purple-500/50;
}

.dark .infobox-experiment p,
.dark .infobox-experiment li,
.dark .infobox-experiment span,
.dark .infobox-experiment h4 {
  color: #e9d5ff !important;
}

.dark .infobox-fastai {
  @apply bg-pink-950/60 border-pink-500/50;
}

.dark .infobox-fastai p,
.dark .infobox-fastai li,
.dark .infobox-fastai span,
.dark .infobox-fastai h4 {
  color: #fbcfe8 !important;
}

/* ========================================
   动画效果
   ======================================== */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
  from { opacity: 0; transform: translateX(20px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 5px rgba(251, 191, 36, 0.3); }
  50% { box-shadow: 0 0 20px rgba(251, 191, 36, 0.6); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

@keyframes bounce-soft {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out;
}

.animate-slideIn {
  animation: slideIn 0.3s ease-out;
}

.animate-slideUp {
  animation: slideUp 0.4s ease-out;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-shimmer {
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  background-size: 200% 100%;
  animation: shimmer 2s infinite;
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-bounce-soft {
  animation: bounce-soft 2s ease-in-out infinite;
}

/* ========================================
   打印样式
   ======================================== */
@media print {
  .no-print {
    display: none !important;
  }
}

/* ========================================
   选中文本高亮
   ======================================== */
::selection {
  background: rgba(251, 191, 36, 0.3);
  color: inherit;
}

.dark ::selection {
  background: rgba(251, 191, 36, 0.4);
}

/* ========================================
   渐变文本
   ======================================== */
.gradient-text {
  background: linear-gradient(135deg, #f59e0b 0%, #ef4444 50%, #8b5cf6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-blue {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* ========================================
   焦点样式
   ======================================== */
button:focus-visible,
a:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid #f59e0b;
  outline-offset: 2px;
}

/* ========================================
   学习卡片
   ======================================== */
.learning-card {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.learning-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
}

.dark .learning-card:hover {
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

/* ========================================
   进度条动画
   ======================================== */
.progress-bar {
  background: linear-gradient(90deg, 
    #f59e0b 0%, 
    #ef4444 25%, 
    #8b5cf6 50%, 
    #06b6d4 75%, 
    #10b981 100%
  );
  background-size: 200% 100%;
  animation: gradient-shift 3s ease infinite;
}

/* ========================================
   玻璃态效果
   ======================================== */
.glass {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.dark .glass {
  background: rgba(30, 41, 59, 0.8);
  border: 1px solid rgba(71, 85, 105, 0.3);
}

/* ========================================
   流程图样式
   ======================================== */
.flow-step {
  @apply relative transition-all duration-300;
}

.flow-step:hover {
  transform: scale(1.02);
}

/* ========================================
   交互式表格
   ======================================== */
.interactive-table {
  @apply w-full border-collapse;
}

.interactive-table th {
  @apply bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left font-semibold text-slate-700 dark:text-slate-200 border-b-2 border-slate-200 dark:border-slate-600;
}

.interactive-table td {
  @apply px-4 py-3 border-b border-slate-100 dark:border-slate-700 text-slate-600 dark:text-slate-300;
}

.interactive-table tr:hover td {
  @apply bg-amber-50 dark:bg-amber-900/20;
}

/* ========================================
   快捷键标签
   ======================================== */
.kbd {
  @apply inline-flex items-center justify-center px-2 py-1 text-xs font-mono bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded shadow-sm;
}

/* ========================================
   徽章样式
   ======================================== */
.badge {
  @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
}

.badge-success {
  @apply bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300;
}

.badge-warning {
  @apply bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300;
}

.badge-info {
  @apply bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300;
}

.badge-error {
  @apply bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300;
}

/* ========================================
   SQL 结果表格
   ======================================== */
.result-table {
  @apply w-full text-sm border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden;
}

.result-table thead {
  @apply bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700;
}

.result-table th {
  @apply px-4 py-2 text-left font-semibold text-slate-700 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700;
}

.result-table td {
  @apply px-4 py-2 text-slate-600 dark:text-slate-300 border-b border-slate-100 dark:border-slate-800;
}

.result-table tbody tr:hover {
  @apply bg-amber-50/50 dark:bg-amber-900/10;
}

.result-table tbody tr:last-child td {
  @apply border-b-0;
}

/* ========================================
   加载动画
   ======================================== */
.loading-dots {
  @apply inline-flex gap-1;
}

.loading-dots span {
  @apply w-2 h-2 bg-amber-500 rounded-full;
  animation: bounce-soft 1.4s infinite ease-in-out both;
}

.loading-dots span:nth-child(1) { animation-delay: -0.32s; }
.loading-dots span:nth-child(2) { animation-delay: -0.16s; }
.loading-dots span:nth-child(3) { animation-delay: 0s; }

/* ========================================
   章节标题装饰
   ======================================== */
.section-title {
  @apply relative;
}

.section-title::before {
  content: '';
  @apply absolute -left-4 top-0 bottom-0 w-1 bg-gradient-to-b from-amber-500 to-orange-600 rounded-full;
}

/* ========================================
   响应式优化
   ======================================== */
@media (max-width: 640px) {
  .code-block pre {
    font-size: 0.75rem;
  }
}

/* ========================================
   暗色模式表格优化
   ======================================== */
.dark table {
  @apply border-slate-700;
}

.dark table th {
  @apply bg-slate-800 text-slate-200 border-slate-600;
}

.dark table td {
  @apply text-slate-300 border-slate-700;
}

.dark table tr:nth-child(even) {
  @apply bg-slate-800/50;
}

/* ========================================
   页面切换动画
   ======================================== */
@keyframes page-enter {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes page-exit {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(-10px) scale(0.98);
  }
}

.page-enter {
  animation: page-enter 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.page-exit {
  animation: page-exit 0.3s cubic-bezier(0.55, 0, 0.68, 0.53);
}

/* ========================================
   卡片动画增强
   ======================================== */
@keyframes card-hover {
  from {
    transform: translateY(0) scale(1);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  to {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
  }
}

.card-hover {
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.card-hover:hover {
  animation: card-hover 0.3s ease-out forwards;
}

.dark .card-hover:hover {
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
}

/* ========================================
   主题切换动画
   ======================================== */
.theme-transition {
  transition: background-color 0.5s ease, color 0.3s ease, border-color 0.3s ease;
}

.theme-transition * {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* ========================================
   渐变背景动画
   ======================================== */
@keyframes gradient-flow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.gradient-bg {
  background: linear-gradient(-45deg, #f59e0b, #ef4444, #8b5cf6, #06b6d4);
  background-size: 400% 400%;
  animation: gradient-flow 15s ease infinite;
}

.gradient-bg-alt {
  background: linear-gradient(-45deg, #3b82f6, #8b5cf6, #ec4899, #10b981);
  background-size: 400% 400%;
  animation: gradient-flow 20s ease infinite;
}

/* ========================================
   按钮动画增强
   ======================================== */
@keyframes button-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.button-primary {
  @apply relative overflow-hidden;
}

.button-primary::before {
  content: '';
  @apply absolute inset-0 bg-white/20 opacity-0 transition-opacity duration-300;
}

.button-primary:hover::before {
  @apply opacity-100;
}

.button-primary:active {
  animation: button-pulse 0.1s ease-out;
}

/* ========================================
   输入框聚焦效果
   ======================================== */
.input-focus {
  @apply transition-all duration-300;
}

.input-focus:focus {
  @apply ring-2 ring-amber-500/50 border-amber-500;
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
}

/* ========================================
   导航栏动画
   ======================================== */
@keyframes nav-slide-down {
  from {
    opacity: 0;
    transform: translateY(-100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.nav-enter {
  animation: nav-slide-down 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* ========================================
   侧边栏动画
   ======================================== */
@keyframes sidebar-slide-in {
  from {
    opacity: 0;
    transform: translateX(-100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.sidebar-enter {
  animation: sidebar-slide-in 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* ========================================
   模态框动画增强
   ======================================== */
@keyframes modal-backdrop-fade {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes modal-content-scale {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.modal-backdrop {
  animation: modal-backdrop-fade 0.3s ease-out;
}

.modal-content {
  animation: modal-content-scale 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* ========================================
   工具提示动画
   ======================================== */
@keyframes tooltip-fade {
  from {
    opacity: 0;
    transform: translateY(5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.tooltip-enter {
  animation: tooltip-fade 0.2s ease-out;
}

/* ========================================
   进度条动画
   ======================================== */
@keyframes progress-fill {
  from { width: 0%; }
  to { width: var(--progress-width, 0%); }
}

.progress-fill {
  animation: progress-fill 1s ease-out forwards;
}

/* ========================================
   统计卡片动画
   ======================================== */
@keyframes stat-count {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.stat-card:nth-child(1) { animation: stat-count 0.5s ease-out 0.1s both; }
.stat-card:nth-child(2) { animation: stat-count 0.5s ease-out 0.2s both; }
.stat-card:nth-child(3) { animation: stat-count 0.5s ease-out 0.3s both; }
.stat-card:nth-child(4) { animation: stat-count 0.5s ease-out 0.4s both; }

/* ========================================
   响应式优化
   ======================================== */
@media (max-width: 768px) {
  .gradient-bg,
  .gradient-bg-alt {
    background-size: 200% 200%;
  }

  .card-hover:hover {
    transform: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .dark .card-hover:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }
}

/* ========================================
   高对比度模式
   ======================================== */
@media (prefers-contrast: high) {
  .gradient-bg,
  .gradient-bg-alt {
    background: #f59e0b;
    animation: none;
  }

  .glass {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: none;
    border: 2px solid #000;
  }

  .dark .glass {
    background: rgba(0, 0, 0, 0.95);
    border: 2px solid #fff;
  }
}

/* ========================================
   Details/Summary 样式
   ======================================== */
details summary {
  @apply cursor-pointer select-none;
}

details summary::-webkit-details-marker {
  display: none;
}

details[open] summary {
  @apply mb-2;
}

/* ========================================
   链接样式
   ======================================== */
.prose-custom a {
  @apply text-amber-600 dark:text-amber-400 underline decoration-amber-300 dark:decoration-amber-700 underline-offset-2 hover:decoration-amber-500 transition-colors;
}

/* ========================================
   代码内联样式
   ======================================== */
:not(pre) > code {
  @apply px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 text-amber-700 dark:text-amber-300 rounded text-sm font-mono;
}

/* ========================================
   平滑滚动
   ======================================== */
html {
  scroll-behavior: smooth;
}

/* ========================================
   禁用动画（可访问性）
   ======================================== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
